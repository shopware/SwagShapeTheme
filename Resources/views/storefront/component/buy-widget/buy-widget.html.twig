{# SwagShapeTheme Copyright (C) 2025 shopware AG #}

{% sw_extends '@Storefront/storefront/component/buy-widget/buy-widget.html.twig' %}

{% block buy_widget_ordernumber_container %}
    {% if b2bSuite %}
        {% sw_include '@SwagB2bPlatform/storefront/_custom/product-detail/b2b-product-detail.html.twig' ignore missing %}
    {% endif %}
{% endblock %}

{% block buy_widget_data %}
    {% set price = page.product.calculatedPrice %}
    {% if page.product.calculatedPrices.count > 0 %}
        {% set price = product.calculatedPrices.last %}
    {% endif %}

    {% set listPrice = price.listPrice.percentage > 0 %}
    {% set hasRange = product.calculatedPrices.count > 1 %}

    {% if listPrice and not hasRange %}
        {% block buy_widget_data_was_price_badge %}
            <p class="product-detail-price-discount">{{ "detail.sale"|trans|sw_sanitize }}</p>
        {% endblock %}
    {% endif %}

    {{ block('buy_widget_data_rich_snippet_url') }}

    {{ block('buy_widget_data_rich_snippet_price_range') }}

    {{ block('buy_widget_data_rich_snippet_price_currency') }}

    {{ block('buy_widget_price') }}

    {{ block('buy_widget_tax') }}

    {% block buy_widget_ordernumber_container_inner %}
        {% if product.productNumber %}
            <div class="product-detail-ordernumber-container">
                {{ block('buy_widget_ordernumber_label') }}

                {{ block('buy_widget_ordernumber') }}
            </div>
        {% endif %}
    {% endblock %}

    {{ block('buy_widget_delivery_informations') }}

    {{ block('buy_widget_reviews') }}
{% endblock %}
